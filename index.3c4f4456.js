function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},a={},n=t.parcelRequired7c6;null==n&&((n=function(e){if(e in r)return r[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},t.parcelRequired7c6=n),n("1h4OK"),n("662h5"),n("cqGDw"),n("2nhTy"),n("34HY9"),n("aSWUZ");var s=n("fb9GJ"),l=n("2nhTy"),i=n("662h5"),o=(i=n("662h5"),n("34HY9"));l=n("2nhTy");const c=document.querySelector(".search__form"),g=document.querySelector(".gallery"),u=document.querySelector(".header__message");c.addEventListener("submit",(async function(t){if(t.preventDefault(),d.searchQuery=c.elements.searchQuery.value.trim(),!d.searchQuery)return f(),void h();await d.getRequest(1).then((t=>{if(y(1),!t.total_pages)return void f();h();let r=new(e(s))(document.getElementById("pagination"),{totalItems:0,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}} custom-class-{{type}}"><span class="tui-ico-{{type}}"></span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}} custom-class-{{type}}"><span class="tui-ico-{{type}}"></span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip custom-class-{{type}}"><span class="tui-ico-ellip"></span></a>'}});r.getCurrentPage();let a=t.total_results;r.reset(a),r.on("afterMove",(e=>{let t=e.page;d.getRequest(1).then((e=>{e.page=t})),y(t)}))}))}));const d=new(0,i.apiService);let p;function h(){g.innerHTML=""}function y(e){d.getRequest(e).then((e=>{let t="";e.results.forEach((({id:e,poster_path:r="https://sd.keepcalms.com/i/sorry-no-picture-available-2.png",genre_ids:a,title:n,release_date:s})=>{let l=function(e){let t="";return e?(e.forEach((e=>{for(const r of p)r.id===e&&(t+=r.name+", ")})),t?t.substring(0,t.length-2):""):""}(a),i=s?s.substring(0,4):"";l&&i&&(l+=" | "),n||(n="no information"),t+=`<li class="gallery__item">\n          <a href="#" class="gallery__link" data-id="${e}">\n          <div class="gallery__thumb">\n          <img class="gallery__img" id="${e}" src="${r?"https://image.tmdb.org/t/p/w500/"+r:"https://sd.keepcalms.com/i/sorry-no-picture-available-2.png"} "alt="${n}" />\n          </div>\n          <div class="gallery__descr">\n          <h2 class="gallery__title">${n}</h2>\n          <p class="gallery__text">${l}${i}</p>\n          </div>\n          </a>\n          </li>`})),g.innerHTML=t,(0,l.backToTop)()}))}function f(){u.insertAdjacentHTML("beforeend",'<div class="header__message-error">Search result not successful. Enter the correct movie name!</div>'),setTimeout((()=>{u.innerHTML=""}),4e3),(0,o.renderGallery)(1),(0,l.addPaginationGallery)()}(0,i.getGenres)().then((e=>{p=Array.from(e.genres)})),n("bTcpz"),n("37v9V"),n("cqGDw"),n("04jNI");var _=n("2shzp");i=n("662h5");const m=document.querySelector(".search__form"),v={genresList:document.querySelector(".genres"),filterNavBtn:document.querySelector(".navigation__filter"),gallery:document.querySelector(".gallery")};v.filterNavBtn.addEventListener("click",(()=>v.genresList.classList.toggle("genres--shown"))),v.genresList.addEventListener("click",(async function(e){if(e.preventDefault(),m.reset(),!e.target.id)return;w=Number(e.target.id),await async function(e,t){try{const r=`https://api.themoviedb.org/3/discover/movie?api_key=e146a7a5146c0f8a3c3cd99167c5b659&language=en-US&sort_by=popularity.desc&include_adult=false&page=${e}&with_genres=${t}`;return(await _.default.get(r)).data}catch(e){console.error("an error occurred"+e)}}(1,w).then((e=>{b=[],e.results.forEach((e=>{let t={id:e.id,poster:e.poster_path,title:e.original_title,genres:e.genre_ids,year:e.release_date.slice(0,4),vote:e.vote_average.toFixed(1)};b.push(t)}))})),await(0,i.getGenres)().then((({genres:e})=>{b.forEach((t=>{switch(t.genres=t.genres.map((t=>(e.forEach((e=>{e.id===t&&(t=e.name)})),t))),!0){case t.genres.length>0&&t.genres.length<=2:t.genres=t.genres.join(", ");break;case t.genres.length>2:t.genres[2]="Other",t.genres=t.genres.slice(0,3).join(", ");break;default:t.genres="Genre N/A"}}))})).catch((e=>{console.log("Failed to get genres : ",e),b.map((e=>e.genres="Genres N/A"))})),v.gallery.innerHTML=b.map((({id:e,poster:t,title:r,genres:a,year:n,vote:s})=>`<li class="gallery__item">\n      <a href="#" class="gallery__link" data-id="${e}">\n      <div class="gallery__thumb">\n      <img class="gallery__img" id="${e}" src="${"https://image.tmdb.org/t/p/w500/"+t}\n      "alt="${r}" />\n      </div>\n      <div class="gallery__descr">\n      <h2 class="gallery__title">${r}</h2>\n      <p class="gallery__text">${a} | ${n}</p>\n      </div></a></li>`)).join("")}));let b=[],w=4;n("04jNI"),n("6gB84");
//# sourceMappingURL=index.3c4f4456.js.map
