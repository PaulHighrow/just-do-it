!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a("bLMy2"),a("54vAX"),a("lbRHt"),a("jcFG7"),a("faNkY"),a("kvep9");var s=a("bpxeT"),c=a("2TvXO"),i=a("1VFfL"),l=a("jcFG7"),o=a("54vAX"),u=(o=a("54vAX"),a("faNkY")),g=(l=a("jcFG7"),"https://sd.keepcalms.com/i/sorry-no-picture-available-2.png"),p=document.querySelector(".search__form"),d=document.querySelector(".gallery"),f=document.querySelector(".header__message");p.addEventListener("submit",(function(e){return m.apply(this,arguments)}));var v,h=new(0,o.apiService);function y(){d.innerHTML=""}function m(){return(m=e(s)(e(c).mark((function t(n){return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),h.searchQuery=p.elements.searchQuery.value.trim(),h.searchQuery){t.next=6;break}return b(),y(),t.abrupt("return");case 6:return t.next=8,h.getRequest(1).then((function(t){if(_(1),t.total_pages){y();var n=new(e(i))(document.getElementById("pagination"),{totalItems:0,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}} custom-class-{{type}}"><span class="tui-ico-{{type}}"></span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}} custom-class-{{type}}"><span class="tui-ico-{{type}}"></span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip custom-class-{{type}}"><span class="tui-ico-ellip"></span></a>'}});n.getCurrentPage();var r=t.total_results;n.reset(r),n.on("afterMove",(function(e){var t=e.page;h.getRequest(1).then((function(e){e.page=t})),_(t)}))}else b()}));case 8:t.sent;case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(e){h.getRequest(e).then((function(e){var t="";e.results.forEach((function(e){var n,r,a=e.id,s=e.poster_path,c=void 0===s?g:s,i=e.genre_ids,l=e.title,o=e.release_date,u=(r="",(n=i)?(n.forEach((function(e){var t=!0,n=!1,a=void 0;try{for(var s,c=v[Symbol.iterator]();!(t=(s=c.next()).done);t=!0){var i=s.value;i.id===e&&(r+=i.name+", ")}}catch(e){n=!0,a=e}finally{try{t||null==c.return||c.return()}finally{if(n)throw a}}})),r?r.substring(0,r.length-2):""):""),p=o?o.substring(0,4):"";u&&p&&(u+=" | "),l||(l="no information");var d=c?"https://image.tmdb.org/t/p/w500/"+c:g;t+='<li class="gallery__item">\n          <a href="#" class="gallery__link" data-id="'.concat(a,'">\n          <div class="gallery__thumb">\n          <img class="gallery__img" id="').concat(a,'" src="').concat(d,' "alt="').concat(l,'" />\n          </div>\n          <div class="gallery__descr">\n          <h2 class="gallery__title">').concat(l,'</h2>\n          <p class="gallery__text">').concat(u).concat(p,"</p>\n          </div>\n          </a>\n          </li>")})),d.innerHTML=t,(0,l.backToTop)()}))}function b(){f.insertAdjacentHTML("beforeend",'<div class="header__message-error">Search result not successful. Enter the correct movie name!</div>'),setTimeout((function(){f.innerHTML=""}),4e3),(0,u.renderGallery)(1),(0,l.addPaginationGallery)()}(0,o.getGenres)().then((function(e){v=Array.from(e.genres)})),a("5xtVg"),a("cDXQO");s=a("bpxeT"),c=a("2TvXO");a("lbRHt"),a("j1lrD");var x=a("dIxxU"),w=(o=a("54vAX"),"https://image.tmdb.org/t/p/w500/"),k=document.querySelector(".search__form"),L={genresList:document.querySelector(".genres"),filterNavBtn:document.querySelector(".navigation__filter"),gallery:document.querySelector(".gallery")};L.filterNavBtn.addEventListener("click",(function(){return L.genresList.classList.toggle("genres--shown")})),L.genresList.addEventListener("click",(function(e){return E.apply(this,arguments)}));var T=[],q=4;function E(){return(E=e(s)(e(c).mark((function t(n){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),k.reset(),n.target.id){e.next=4;break}return e.abrupt("return");case 4:return q=Number(n.target.id),e.next=7,S(1,q).then((function(e){T=[],e.results.forEach((function(e){var t={id:e.id,poster:e.poster_path,title:e.original_title,genres:e.genre_ids,year:e.release_date.slice(0,4),vote:e.vote_average.toFixed(1)};T.push(t)}))}));case 7:return e.next=9,(0,o.getGenres)().then((function(e){var t=e.genres;T.forEach((function(e){switch(e.genres=e.genres.map((function(e){return t.forEach((function(t){t.id===e&&(e=t.name)})),e})),!0){case e.genres.length>0&&e.genres.length<=2:e.genres=e.genres.join(", ");break;case e.genres.length>2:e.genres[2]="Other",e.genres=e.genres.slice(0,3).join(", ");break;default:e.genres="Genre N/A"}}))})).catch((function(e){console.log("Failed to get genres : ",e),T.map((function(e){return e.genres="Genres N/A"}))}));case 9:L.gallery.innerHTML=T.map((function(e){var t=e.id,n=e.poster,r=e.title,a=e.genres,s=e.year;e.vote;return'<li class="gallery__item">\n      <a href="#" class="gallery__link" data-id="'.concat(t,'">\n      <div class="gallery__thumb">\n      <img class="gallery__img" id="').concat(t,'" src="').concat(w+n,'\n      "alt="').concat(r,'" />\n      </div>\n      <div class="gallery__descr">\n      <h2 class="gallery__title">').concat(r,'</h2>\n      <p class="gallery__text">').concat(a," | ").concat(s,"</p>\n      </div></a></li>")})).join("");case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function S(e,t){return M.apply(this,arguments)}function M(){return(M=e(s)(e(c).mark((function t(n,r){var a,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="https://api.themoviedb.org/3/discover/movie?api_key=e146a7a5146c0f8a3c3cd99167c5b659&language=en-US&sort_by=popularity.desc&include_adult=false&page=".concat(n,"&with_genres=").concat(r),e.next=4,x.default.get(a);case 4:return s=e.sent,e.abrupt("return",s.data);case 8:e.prev=8,e.t0=e.catch(0),console.error("an error occurred"+e.t0);case 11:case"end":return e.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}a("j1lrD"),a("475fx")}();
//# sourceMappingURL=index.9fc62081.js.map
